webpackHotUpdate("main", {
    /***/ "./src/components/grid.ts":
        /*!********************************!*\
  !*** ./src/components/grid.ts ***!
  \********************************/
        /*! no static exports found */
        /***/ function (module, exports, __webpack_require__) {
            "use strict";
            eval(
                '\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== "function" && b !== null)\r\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nvar PIXI = __webpack_require__(/*! pixi.js */ "./node_modules/pixi.js/lib/pixi.es.js");\r\nvar utils_1 = __webpack_require__(/*! ../utils */ "./src/utils/index.ts");\r\nvar math_1 = __webpack_require__(/*! ../utils/math */ "./src/utils/math.ts");\r\nvar config_1 = __webpack_require__(/*! ../config */ "./src/config.ts");\r\nvar Grid = /** @class */ (function (_super) {\r\n    __extends(Grid, _super);\r\n    function Grid(size) {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * From screen space to grid space\r\n         * @param x X in screen space\r\n         * @param y Y in screen space\r\n         * @returns Coordinates in grid space\r\n         */\r\n        _this.screenToGrid = function (x, y) { return ({\r\n            x: (-_this.x + x) / _this.size,\r\n            y: (-_this.y + y) / _this.size,\r\n        }); };\r\n        /**\r\n         * From grid space to screen space (Top Left corner)\r\n         * @param x X in grid space\r\n         * @param y Y in grid space\r\n         * @returns Coordinates in screen space\r\n         */\r\n        _this.gridToScreen = function (x, y) { return ({\r\n            x: Math.floor(x) * _this.size + _this.x,\r\n            y: Math.floor(y) * _this.size + _this.y,\r\n        }); };\r\n        _this.size = size;\r\n        _this.tiles = new Array();\r\n        _this.mousePos = [0, 0];\r\n        _this.generateChildren().forEach(function (child) { return _this.addChild(child); });\r\n        utils_1.onResize(_this.update.bind(_this));\r\n        _this.interactive = true;\r\n        // this.on("wheel", (e:PIXI.FederatedEvent) => console.log("scroll"));\r\n        utils_1.onScroll(_this, _this.scroll.bind(_this));\r\n        _this.on("mousemove", _this.mouseMove.bind(_this));\r\n        return _this;\r\n        // onMouseMove(this.mouseMove.bind(this));\r\n    }\r\n    Grid.prototype.addTile = function () {\r\n    };\r\n    Grid.prototype.scroll = function (e) {\r\n        var mult = 1 / (config_1.default.zoomCoeff * e.deltaY);\r\n        if (mult < 0)\r\n            mult = -1 / mult;\r\n        // console.log(mult);\r\n        var prevPos = this.screenToGrid(e.pageX, e.pageY);\r\n        this.size = Math.round(mult * this.size);\r\n        this.size = math_1.clamp(this.size, 20, 350);\r\n        var newPos = this.screenToGrid(e.pageX, e.pageY);\r\n        // console.log(prevPos);\r\n        // console.log(newPos);\r\n        this.x += (newPos.x - prevPos.x) * this.size;\r\n        this.y += (newPos.y - prevPos.y) * this.size;\r\n        // console.log({ size: this.size });\r\n        this.update();\r\n    };\r\n    Grid.prototype.mouseMove = function (event) {\r\n        var e = event.data.originalEvent;\r\n        this.mousePos = [e.pageX, e.pageY];\r\n        // console.log(this.mousePos);\r\n        if (!utils_1.mouseDown.left || !e.shiftKey)\r\n            return;\r\n        this.x += e.movementX;\r\n        this.y += e.movementY;\r\n        // console.log({x: this.x, y: this.y});\r\n        this.update();\r\n    };\r\n    Grid.prototype.generateChildren = function () {\r\n        var width = utils_1.dimensions()[0];\r\n        var height = utils_1.dimensions()[1];\r\n        var tileXCount = Math.floor(width / this.size);\r\n        var tileYCount = Math.floor(height / this.size);\r\n        var lineGraphics = new PIXI.Graphics();\r\n        var output = [];\r\n        for (var x = -Math.ceil(this.x / this.size); x <= tileXCount - Math.floor(this.x / this.size); x++) {\r\n            lineGraphics.beginFill(config_1.default.lineColor);\r\n            lineGraphics.lineStyle(0);\r\n            lineGraphics.drawRect(x * this.size, -this.y, config_1.default.lineWidth, height);\r\n        }\r\n        for (var y = -Math.ceil(this.y / this.size); y <= tileYCount - Math.floor(this.y / this.size); y++) {\r\n            lineGraphics.beginFill(config_1.default.lineColor);\r\n            lineGraphics.lineStyle(0);\r\n            lineGraphics.drawRect(-this.x, y * this.size, width, config_1.default.lineWidth);\r\n        }\r\n        var gridPos = this.screenToGrid(this.mousePos[0], this.mousePos[1]);\r\n        gridPos.x = Math.floor(gridPos.x) * this.size;\r\n        gridPos.y = Math.floor(gridPos.y) * this.size;\r\n        var hlTile = new PIXI.Graphics();\r\n        hlTile.beginFill(config_1.default.highlightTileColor);\r\n        hlTile.lineStyle(0);\r\n        hlTile.drawRect(gridPos.x + (config_1.default.lineWidth / 2), gridPos.y + (config_1.default.lineWidth / 2), this.size, this.size);\r\n        output.push(hlTile);\r\n        output.push(lineGraphics);\r\n        return output;\r\n    };\r\n    Grid.prototype.update = function () {\r\n        var _this = this;\r\n        this.removeChildren();\r\n        this.generateChildren().forEach(function (child) { return _this.addChild(child); });\r\n    };\r\n    return Grid;\r\n}(PIXI.Container));\r\nexports.default = Grid;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9ncmlkLnRzLmpzIiwic291cmNlcyI6WyIuLi8uLi8uL3NyYy9jb21wb25lbnRzL2dyaWQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUElYSSBmcm9tIFwicGl4aS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gICAgZGltZW5zaW9ucyxcclxuICAgIG1vdXNlRG93bixcclxuICAgIG9uUmVzaXplLFxyXG4gICAgb25TY3JvbGxcclxufSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuaW1wb3J0IHsgY2xhbXAgfSBmcm9tIFwiLi4vdXRpbHMvbWF0aFwiO1xyXG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWdcIjtcclxuaW1wb3J0IFRpbGUgZnJvbSBcIi4vdGlsZXMvdGlsZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3JpZCBleHRlbmRzIFBJWEkuQ29udGFpbmVyIHtcclxuXHJcbiAgICBzaXplOiBudW1iZXI7XHJcbiAgICB0aWxlczogVGlsZVtdO1xyXG5cclxuICAgIG1vdXNlUG9zOiBbeDogbnVtYmVyLCB5OiBudW1iZXJdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNpemU6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgICAgICB0aGlzLnRpbGVzID0gbmV3IEFycmF5PFRpbGU+KCk7XHJcbiAgICAgICAgdGhpcy5tb3VzZVBvcyA9IFswLDBdO1xyXG5cclxuICAgICAgICB0aGlzLmdlbmVyYXRlQ2hpbGRyZW4oKS5mb3JFYWNoKChjaGlsZCkgPT4gdGhpcy5hZGRDaGlsZChjaGlsZCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG9uUmVzaXplKHRoaXMudXBkYXRlLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICB0aGlzLmludGVyYWN0aXZlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8gdGhpcy5vbihcIndoZWVsXCIsIChlOlBJWEkuRmVkZXJhdGVkRXZlbnQpID0+IGNvbnNvbGUubG9nKFwic2Nyb2xsXCIpKTtcclxuICAgICAgICBvblNjcm9sbCh0aGlzLCB0aGlzLnNjcm9sbC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgdGhpcy5vbihcIm1vdXNlbW92ZVwiLCB0aGlzLm1vdXNlTW92ZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAvLyBvbk1vdXNlTW92ZSh0aGlzLm1vdXNlTW92ZS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkVGlsZSgpIHtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2Nyb2xsKGU6IFdoZWVsRXZlbnQpIHtcclxuICAgICAgICBsZXQgbXVsdCA9IDEvKGNvbmZpZy56b29tQ29lZmYgKiBlLmRlbHRhWSk7XHJcbiAgICAgICAgaWYgKG11bHQgPCAwKSBtdWx0ID0gLTEvbXVsdDtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhtdWx0KTtcclxuXHJcbiAgICAgICAgbGV0IHByZXZQb3MgPSB0aGlzLnNjcmVlblRvR3JpZChlLnBhZ2VYLCBlLnBhZ2VZKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaXplID0gTWF0aC5yb3VuZChtdWx0KnRoaXMuc2l6ZSk7XHJcbiAgICAgICAgdGhpcy5zaXplID0gY2xhbXAodGhpcy5zaXplLCAyMCwgMzUwKTtcclxuXHJcbiAgICAgICAgbGV0IG5ld1BvcyA9IHRoaXMuc2NyZWVuVG9HcmlkKGUucGFnZVgsIGUucGFnZVkpO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwcmV2UG9zKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdQb3MpO1xyXG5cclxuICAgICAgICB0aGlzLnggKz0gKG5ld1Bvcy54LXByZXZQb3MueCkgKiB0aGlzLnNpemU7XHJcbiAgICAgICAgdGhpcy55ICs9IChuZXdQb3MueS1wcmV2UG9zLnkpICogdGhpcy5zaXplO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh7IHNpemU6IHRoaXMuc2l6ZSB9KTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbW91c2VNb3ZlKGV2ZW50OiBhbnkpIHtcclxuICAgICAgICBsZXQgZSA9IGV2ZW50LmRhdGEub3JpZ2luYWxFdmVudCBhcyBQb2ludGVyRXZlbnQ7XHJcbiAgICAgICAgdGhpcy5tb3VzZVBvcyA9IFtlLnBhZ2VYLCBlLnBhZ2VZXTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5tb3VzZVBvcyk7XHJcblxyXG4gICAgICAgIGlmICghbW91c2VEb3duLmxlZnQgfHwgIWUuc2hpZnRLZXkpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy54ICs9IGUubW92ZW1lbnRYO1xyXG4gICAgICAgIHRoaXMueSArPSBlLm1vdmVtZW50WTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coe3g6IHRoaXMueCwgeTogdGhpcy55fSk7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdlbmVyYXRlQ2hpbGRyZW4oKTogUElYSS5HcmFwaGljc1tdIHtcclxuICAgICAgICBsZXQgd2lkdGggPSBkaW1lbnNpb25zKClbMF07XHJcbiAgICAgICAgbGV0IGhlaWdodCA9IGRpbWVuc2lvbnMoKVsxXTtcclxuICAgICAgICBjb25zdCB0aWxlWENvdW50ID0gTWF0aC5mbG9vcih3aWR0aCAvIHRoaXMuc2l6ZSk7XHJcbiAgICAgICAgY29uc3QgdGlsZVlDb3VudCA9IE1hdGguZmxvb3IoaGVpZ2h0IC8gdGhpcy5zaXplKTtcclxuXHJcbiAgICAgICAgbGV0IGxpbmVHcmFwaGljcyA9IG5ldyBQSVhJLkdyYXBoaWNzKCk7XHJcblxyXG4gICAgICAgIGxldCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKFxyXG4gICAgICAgICAgICBsZXQgeCA9IC1NYXRoLmNlaWwodGhpcy54IC8gdGhpcy5zaXplKTtcclxuICAgICAgICAgICAgeCA8PSB0aWxlWENvdW50IC0gTWF0aC5mbG9vcih0aGlzLnggLyB0aGlzLnNpemUpO1xyXG4gICAgICAgICAgICB4KytcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgbGluZUdyYXBoaWNzLmJlZ2luRmlsbChjb25maWcubGluZUNvbG9yKTtcclxuICAgICAgICAgICAgbGluZUdyYXBoaWNzLmxpbmVTdHlsZSgwKTtcclxuICAgICAgICAgICAgbGluZUdyYXBoaWNzLmRyYXdSZWN0KHggKiB0aGlzLnNpemUsIC10aGlzLnksIGNvbmZpZy5saW5lV2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKFxyXG4gICAgICAgICAgICBsZXQgeSA9IC1NYXRoLmNlaWwodGhpcy55IC8gdGhpcy5zaXplKTtcclxuICAgICAgICAgICAgeSA8PSB0aWxlWUNvdW50IC0gTWF0aC5mbG9vcih0aGlzLnkgLyB0aGlzLnNpemUpO1xyXG4gICAgICAgICAgICB5KytcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgbGluZUdyYXBoaWNzLmJlZ2luRmlsbChjb25maWcubGluZUNvbG9yKTtcclxuICAgICAgICAgICAgbGluZUdyYXBoaWNzLmxpbmVTdHlsZSgwKTtcclxuICAgICAgICAgICAgbGluZUdyYXBoaWNzLmRyYXdSZWN0KC10aGlzLngsIHkgKiB0aGlzLnNpemUsIHdpZHRoLCBjb25maWcubGluZVdpZHRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBncmlkUG9zID0gdGhpcy5zY3JlZW5Ub0dyaWQodGhpcy5tb3VzZVBvc1swXSwgdGhpcy5tb3VzZVBvc1sxXSk7XHJcbiAgICAgICAgZ3JpZFBvcy54ID0gTWF0aC5mbG9vcihncmlkUG9zLngpKnRoaXMuc2l6ZTtcclxuICAgICAgICBncmlkUG9zLnkgPSBNYXRoLmZsb29yKGdyaWRQb3MueSkqdGhpcy5zaXplO1xyXG5cclxuICAgICAgICBsZXQgaGxUaWxlID0gbmV3IFBJWEkuR3JhcGhpY3MoKTtcclxuICAgICAgICBobFRpbGUuYmVnaW5GaWxsKGNvbmZpZy5oaWdobGlnaHRUaWxlQ29sb3IpO1xyXG4gICAgICAgIGhsVGlsZS5saW5lU3R5bGUoMCk7XHJcbiAgICAgICAgaGxUaWxlLmRyYXdSZWN0KGdyaWRQb3MueCArIChjb25maWcubGluZVdpZHRoIC8gMiksIGdyaWRQb3MueSArIChjb25maWcubGluZVdpZHRoIC8gMiksIHRoaXMuc2l6ZSwgdGhpcy5zaXplKTtcclxuXHJcbiAgICAgICAgb3V0cHV0LnB1c2goaGxUaWxlKTtcclxuICAgICAgICBvdXRwdXQucHVzaChsaW5lR3JhcGhpY3MpO1xyXG5cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVDaGlsZHJlbigpO1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVDaGlsZHJlbigpLmZvckVhY2goKGNoaWxkKSA9PiB0aGlzLmFkZENoaWxkKGNoaWxkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGcm9tIHNjcmVlbiBzcGFjZSB0byBncmlkIHNwYWNlXHJcbiAgICAgKiBAcGFyYW0geCBYIGluIHNjcmVlbiBzcGFjZVxyXG4gICAgICogQHBhcmFtIHkgWSBpbiBzY3JlZW4gc3BhY2VcclxuICAgICAqIEByZXR1cm5zIENvb3JkaW5hdGVzIGluIGdyaWQgc3BhY2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNjcmVlblRvR3JpZCA9ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gKHtcclxuICAgICAgICB4OiAoLXRoaXMueCArIHgpIC8gdGhpcy5zaXplLFxyXG4gICAgICAgIHk6ICgtdGhpcy55ICsgeSkgLyB0aGlzLnNpemUsXHJcbiAgICB9KVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRnJvbSBncmlkIHNwYWNlIHRvIHNjcmVlbiBzcGFjZSAoVG9wIExlZnQgY29ybmVyKVxyXG4gICAgICogQHBhcmFtIHggWCBpbiBncmlkIHNwYWNlXHJcbiAgICAgKiBAcGFyYW0geSBZIGluIGdyaWQgc3BhY2VcclxuICAgICAqIEByZXR1cm5zIENvb3JkaW5hdGVzIGluIHNjcmVlbiBzcGFjZVxyXG4gICAgICovXHJcbiAgICAgcHVibGljIGdyaWRUb1NjcmVlbiA9ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gKHtcclxuICAgICAgICB4OiBNYXRoLmZsb29yKHgpICogdGhpcy5zaXplICsgdGhpcy54LFxyXG4gICAgICAgIHk6IE1hdGguZmxvb3IoeSkgKiB0aGlzLnNpemUgKyB0aGlzLnksXHJcbiAgICB9KTtcclxuXHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFNQTtBQUNBO0FBR0E7QUFBQTtBQU9BO0FBQUE7QUErR0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqSUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBd0JBO0FBQUE7OyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/grid.ts\n'
            );

            /***/
        },
});
