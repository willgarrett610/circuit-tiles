webpackHotUpdate("main", {
    /***/ "./src/components/grid.ts":
        /*!********************************!*\
  !*** ./src/components/grid.ts ***!
  \********************************/
        /*! no static exports found */
        /***/ function (module, exports, __webpack_require__) {
            "use strict";
            eval(
                '\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== "function" && b !== null)\r\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nvar PIXI = __webpack_require__(/*! pixi.js */ "./node_modules/pixi.js/lib/pixi.es.js");\r\nvar utils_1 = __webpack_require__(/*! ../utils */ "./src/utils/index.ts");\r\nvar math_1 = __webpack_require__(/*! ../utils/math */ "./src/utils/math.ts");\r\nvar config_1 = __webpack_require__(/*! ../config */ "./src/config.ts");\r\nvar Grid = /** @class */ (function (_super) {\r\n    __extends(Grid, _super);\r\n    function Grid(size) {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * From screen space to grid space\r\n         * @param x X in screen space\r\n         * @param y Y in screen space\r\n         * @returns Coordinates in grid space\r\n         */\r\n        _this.screenToGrid = function (x, y) { return ({\r\n            x: (-_this.x + x) / _this.size,\r\n            y: (-_this.y + y) / _this.size,\r\n        }); };\r\n        /**\r\n         * From grid space to screen space (Top Left corner)\r\n         * @param x X in grid space\r\n         * @param y Y in grid space\r\n         * @returns Coordinates in screen space\r\n         */\r\n        _this.gridToScreen = function (x, y) { return ({\r\n            x: Math.floor(x) * _this.size + _this.x,\r\n            y: Math.floor(y) * _this.size + _this.y,\r\n        }); };\r\n        _this.size = size;\r\n        _this.tiles = [];\r\n        _this.mousePos = [0, 0];\r\n        _this.generateChildren().forEach(function (child) { return _this.addChild(child); });\r\n        utils_1.onResize(_this.update.bind(_this));\r\n        _this.interactive = true;\r\n        // this.on("wheel", (e:PIXI.FederatedEvent) => console.log("scroll"));\r\n        utils_1.onScroll(_this, _this.scroll.bind(_this));\r\n        _this.on("mousemove", _this.mouseMove.bind(_this));\r\n        return _this;\r\n        // onMouseMove(this.mouseMove.bind(this));\r\n    }\r\n    Grid.prototype.addTile = function () {\r\n    };\r\n    Grid.prototype.scroll = function (e) {\r\n        var mult = 1 / (config_1.default.zoomCoeff * e.deltaY);\r\n        if (mult < 0)\r\n            mult = -1 / mult;\r\n        // console.log(mult);\r\n        var prevPos = this.screenToGrid(e.pageX, e.pageY);\r\n        this.size = Math.round(mult * this.size);\r\n        this.size = math_1.clamp(this.size, 20, 350);\r\n        var newPos = this.screenToGrid(e.pageX, e.pageY);\r\n        // console.log(prevPos);\r\n        // console.log(newPos);\r\n        this.x += (newPos.x - prevPos.x) * this.size;\r\n        this.y += (newPos.y - prevPos.y) * this.size;\r\n        // console.log({ size: this.size });\r\n        this.update();\r\n    };\r\n    Grid.prototype.mouseMove = function (event) {\r\n        var e = event.data.originalEvent;\r\n        this.mousePos = [e.pageX, e.pageY];\r\n        // console.log(this.mousePos);\r\n        if (!utils_1.mouseDown.left || !e.shiftKey)\r\n            return;\r\n        this.x += e.movementX;\r\n        this.y += e.movementY;\r\n        // console.log({x: this.x, y: this.y});\r\n        this.update();\r\n    };\r\n    Grid.prototype.generateChildren = function () {\r\n        var width = utils_1.dimensions()[0];\r\n        var height = utils_1.dimensions()[1];\r\n        var tileXCount = Math.floor(width / this.size);\r\n        var tileYCount = Math.floor(height / this.size);\r\n        var lineGraphics = new PIXI.Graphics();\r\n        var output = [];\r\n        for (var x = -Math.ceil(this.x / this.size); x <= tileXCount - Math.floor(this.x / this.size); x++) {\r\n            lineGraphics.beginFill(config_1.default.lineColor);\r\n            lineGraphics.lineStyle(0);\r\n            lineGraphics.drawRect(x * this.size, -this.y, config_1.default.lineWidth, height);\r\n        }\r\n        for (var y = -Math.ceil(this.y / this.size); y <= tileYCount - Math.floor(this.y / this.size); y++) {\r\n            lineGraphics.beginFill(config_1.default.lineColor);\r\n            lineGraphics.lineStyle(0);\r\n            lineGraphics.drawRect(-this.x, y * this.size, width, config_1.default.lineWidth);\r\n        }\r\n        var gridPos = this.screenToGrid(this.mousePos[0], this.mousePos[1]);\r\n        gridPos.x = Math.floor(gridPos.x) * this.size;\r\n        gridPos.y = Math.floor(gridPos.y) * this.size;\r\n        var hlTile = new PIXI.Graphics();\r\n        hlTile.beginFill(config_1.default.highlightTileColor);\r\n        hlTile.lineStyle(0);\r\n        hlTile.drawRect(gridPos.x + (config_1.default.lineWidth / 2), gridPos.y + (config_1.default.lineWidth / 2), this.size, this.size);\r\n        output.push(hlTile);\r\n        output.push(lineGraphics);\r\n        return output;\r\n    };\r\n    Grid.prototype.update = function () {\r\n        var _this = this;\r\n        this.removeChildren();\r\n        this.generateChildren().forEach(function (child) { return _this.addChild(child); });\r\n    };\r\n    return Grid;\r\n}(PIXI.Container));\r\nexports.default = Grid;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9ncmlkLnRzLmpzIiwic291cmNlcyI6WyIuLi8uLi8uL3NyYy9jb21wb25lbnRzL2dyaWQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUElYSSBmcm9tIFwicGl4aS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gICAgZGltZW5zaW9ucyxcclxuICAgIG1vdXNlRG93bixcclxuICAgIG9uUmVzaXplLFxyXG4gICAgb25TY3JvbGxcclxufSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuaW1wb3J0IHsgY2xhbXAgfSBmcm9tIFwiLi4vdXRpbHMvbWF0aFwiO1xyXG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWdcIjtcclxuaW1wb3J0IFRpbGUgZnJvbSBcIi4vdGlsZXMvdGlsZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3JpZCBleHRlbmRzIFBJWEkuQ29udGFpbmVyIHtcclxuXHJcbiAgICBzaXplOiBudW1iZXI7XHJcbiAgICB0aWxlczogVGlsZVtdO1xyXG5cclxuICAgIG1vdXNlUG9zOiAgIFt4OiBudW1iZXIsIHk6IG51bWJlcl07XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2l6ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xyXG4gICAgICAgIHRoaXMudGlsZXMgPSBbXTtcclxuICAgICAgICB0aGlzLm1vdXNlUG9zID0gWzAsMF07XHJcblxyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVDaGlsZHJlbigpLmZvckVhY2goKGNoaWxkKSA9PiB0aGlzLmFkZENoaWxkKGNoaWxkKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgb25SZXNpemUodGhpcy51cGRhdGUuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIHRoaXMuaW50ZXJhY3RpdmUgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyB0aGlzLm9uKFwid2hlZWxcIiwgKGU6UElYSS5GZWRlcmF0ZWRFdmVudCkgPT4gY29uc29sZS5sb2coXCJzY3JvbGxcIikpO1xyXG4gICAgICAgIG9uU2Nyb2xsKHRoaXMsIHRoaXMuc2Nyb2xsLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICB0aGlzLm9uKFwibW91c2Vtb3ZlXCIsIHRoaXMubW91c2VNb3ZlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIC8vIG9uTW91c2VNb3ZlKHRoaXMubW91c2VNb3ZlLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFRpbGUoKSB7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgc2Nyb2xsKGU6IFdoZWVsRXZlbnQpIHtcclxuICAgICAgICBsZXQgbXVsdCA9IDEvKGNvbmZpZy56b29tQ29lZmYgKiBlLmRlbHRhWSk7XHJcbiAgICAgICAgaWYgKG11bHQgPCAwKSBtdWx0ID0gLTEvbXVsdDtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhtdWx0KTtcclxuXHJcbiAgICAgICAgbGV0IHByZXZQb3MgPSB0aGlzLnNjcmVlblRvR3JpZChlLnBhZ2VYLCBlLnBhZ2VZKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaXplID0gTWF0aC5yb3VuZChtdWx0KnRoaXMuc2l6ZSk7XHJcbiAgICAgICAgdGhpcy5zaXplID0gY2xhbXAodGhpcy5zaXplLCAyMCwgMzUwKTtcclxuXHJcbiAgICAgICAgbGV0IG5ld1BvcyA9IHRoaXMuc2NyZWVuVG9HcmlkKGUucGFnZVgsIGUucGFnZVkpO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwcmV2UG9zKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdQb3MpO1xyXG5cclxuICAgICAgICB0aGlzLnggKz0gKG5ld1Bvcy54LXByZXZQb3MueCkgKiB0aGlzLnNpemU7XHJcbiAgICAgICAgdGhpcy55ICs9IChuZXdQb3MueS1wcmV2UG9zLnkpICogdGhpcy5zaXplO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh7IHNpemU6IHRoaXMuc2l6ZSB9KTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBtb3VzZU1vdmUoZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIGxldCBlID0gZXZlbnQuZGF0YS5vcmlnaW5hbEV2ZW50IGFzIFBvaW50ZXJFdmVudDtcclxuICAgICAgICB0aGlzLm1vdXNlUG9zID0gW2UucGFnZVgsIGUucGFnZVldO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1vdXNlUG9zKTtcclxuICAgICAgICBpZiAoIW1vdXNlRG93bi5sZWZ0IHx8ICFlLnNoaWZ0S2V5KSByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMueCArPSBlLm1vdmVtZW50WDtcclxuICAgICAgICB0aGlzLnkgKz0gZS5tb3ZlbWVudFk7XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHt4OiB0aGlzLngsIHk6IHRoaXMueX0pO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlQ2hpbGRyZW4oKTogUElYSS5HcmFwaGljc1tdIHtcclxuICAgICAgICBsZXQgd2lkdGggPSBkaW1lbnNpb25zKClbMF07XHJcbiAgICAgICAgbGV0IGhlaWdodCA9IGRpbWVuc2lvbnMoKVsxXTtcclxuICAgICAgICBjb25zdCB0aWxlWENvdW50ID0gTWF0aC5mbG9vcih3aWR0aCAvIHRoaXMuc2l6ZSk7XHJcbiAgICAgICAgY29uc3QgdGlsZVlDb3VudCA9IE1hdGguZmxvb3IoaGVpZ2h0IC8gdGhpcy5zaXplKTtcclxuXHJcbiAgICAgICAgbGV0IGxpbmVHcmFwaGljcyA9IG5ldyBQSVhJLkdyYXBoaWNzKCk7XHJcblxyXG4gICAgICAgIGxldCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKFxyXG4gICAgICAgICAgICBsZXQgeCA9IC1NYXRoLmNlaWwodGhpcy54IC8gdGhpcy5zaXplKTtcclxuICAgICAgICAgICAgeCA8PSB0aWxlWENvdW50IC0gTWF0aC5mbG9vcih0aGlzLnggLyB0aGlzLnNpemUpO1xyXG4gICAgICAgICAgICB4KytcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgbGluZUdyYXBoaWNzLmJlZ2luRmlsbChjb25maWcubGluZUNvbG9yKTtcclxuICAgICAgICAgICAgbGluZUdyYXBoaWNzLmxpbmVTdHlsZSgwKTtcclxuICAgICAgICAgICAgbGluZUdyYXBoaWNzLmRyYXdSZWN0KHggKiB0aGlzLnNpemUsIC10aGlzLnksIGNvbmZpZy5saW5lV2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKFxyXG4gICAgICAgICAgICBsZXQgeSA9IC1NYXRoLmNlaWwodGhpcy55IC8gdGhpcy5zaXplKTtcclxuICAgICAgICAgICAgeSA8PSB0aWxlWUNvdW50IC0gTWF0aC5mbG9vcih0aGlzLnkgLyB0aGlzLnNpemUpO1xyXG4gICAgICAgICAgICB5KytcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgbGluZUdyYXBoaWNzLmJlZ2luRmlsbChjb25maWcubGluZUNvbG9yKTtcclxuICAgICAgICAgICAgbGluZUdyYXBoaWNzLmxpbmVTdHlsZSgwKTtcclxuICAgICAgICAgICAgbGluZUdyYXBoaWNzLmRyYXdSZWN0KC10aGlzLngsIHkgKiB0aGlzLnNpemUsIHdpZHRoLCBjb25maWcubGluZVdpZHRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBncmlkUG9zID0gdGhpcy5zY3JlZW5Ub0dyaWQodGhpcy5tb3VzZVBvc1swXSwgdGhpcy5tb3VzZVBvc1sxXSk7XHJcbiAgICAgICAgZ3JpZFBvcy54ID0gTWF0aC5mbG9vcihncmlkUG9zLngpKnRoaXMuc2l6ZTtcclxuICAgICAgICBncmlkUG9zLnkgPSBNYXRoLmZsb29yKGdyaWRQb3MueSkqdGhpcy5zaXplO1xyXG5cclxuICAgICAgICBsZXQgaGxUaWxlID0gbmV3IFBJWEkuR3JhcGhpY3MoKTtcclxuICAgICAgICBobFRpbGUuYmVnaW5GaWxsKGNvbmZpZy5oaWdobGlnaHRUaWxlQ29sb3IpO1xyXG4gICAgICAgIGhsVGlsZS5saW5lU3R5bGUoMCk7XHJcbiAgICAgICAgaGxUaWxlLmRyYXdSZWN0KGdyaWRQb3MueCArIChjb25maWcubGluZVdpZHRoIC8gMiksIGdyaWRQb3MueSArIChjb25maWcubGluZVdpZHRoIC8gMiksIHRoaXMuc2l6ZSwgdGhpcy5zaXplKTtcclxuXHJcbiAgICAgICAgb3V0cHV0LnB1c2goaGxUaWxlKTtcclxuICAgICAgICBvdXRwdXQucHVzaChsaW5lR3JhcGhpY3MpO1xyXG5cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIHtcclxuICAgICAgICB0aGlzLnJlbW92ZUNoaWxkcmVuKCk7XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUNoaWxkcmVuKCkuZm9yRWFjaCgoY2hpbGQpID0+IHRoaXMuYWRkQ2hpbGQoY2hpbGQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZyb20gc2NyZWVuIHNwYWNlIHRvIGdyaWQgc3BhY2VcclxuICAgICAqIEBwYXJhbSB4IFggaW4gc2NyZWVuIHNwYWNlXHJcbiAgICAgKiBAcGFyYW0geSBZIGluIHNjcmVlbiBzcGFjZVxyXG4gICAgICogQHJldHVybnMgQ29vcmRpbmF0ZXMgaW4gZ3JpZCBzcGFjZVxyXG4gICAgICovXHJcbiAgICBzY3JlZW5Ub0dyaWQgPSAoeDogbnVtYmVyLCB5OiBudW1iZXIpID0+ICh7XHJcbiAgICAgICAgeDogKC10aGlzLnggKyB4KSAvIHRoaXMuc2l6ZSxcclxuICAgICAgICB5OiAoLXRoaXMueSArIHkpIC8gdGhpcy5zaXplLFxyXG4gICAgfSlcclxuXHJcbiAgICAvKipcclxuICAgICAqIEZyb20gZ3JpZCBzcGFjZSB0byBzY3JlZW4gc3BhY2UgKFRvcCBMZWZ0IGNvcm5lcilcclxuICAgICAqIEBwYXJhbSB4IFggaW4gZ3JpZCBzcGFjZVxyXG4gICAgICogQHBhcmFtIHkgWSBpbiBncmlkIHNwYWNlXHJcbiAgICAgKiBAcmV0dXJucyBDb29yZGluYXRlcyBpbiBzY3JlZW4gc3BhY2VcclxuICAgICAqL1xyXG4gICAgZ3JpZFRvU2NyZWVuID0gKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiAoe1xyXG4gICAgICAgIHg6IE1hdGguZmxvb3IoeCkgKiB0aGlzLnNpemUgKyB0aGlzLngsXHJcbiAgICAgICAgeTogTWF0aC5mbG9vcih5KSAqIHRoaXMuc2l6ZSArIHRoaXMueSxcclxuICAgIH0pO1xyXG5cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFHQTtBQUFBO0FBT0E7QUFBQTtBQThHQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhJQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUF3QkE7QUFBQTs7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/grid.ts\n'
            );

            /***/
        },
});
